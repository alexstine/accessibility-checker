!function($){"use strict";new class{constructor(){this.tooltip=null,this.timeout=null,this.edac_id=null,this.edac_id=this.get_url_parameter("edac"),edac_script_vars.loggedIn&&this.edac_id&&this.ajax(this.edac_id)}get_url_parameter(t){var e,i,o=window.location.search.substring(1).split("&");for(i=0;i<o.length;i++)if((e=o[i].split("="))[0]===t)return void 0===e[1]||decodeURIComponent(e[1]);return!1}ajax(t){var e=this;$.ajax({url:edac_script_vars.ajaxurl,method:"GET",data:{action:"edac_frontend_highlight_ajax",id:t,nonce:edac_script_vars.nonce}}).done((function(t){if(!0===t.success){let i=$.parseJSON(t.data);e.select_object(i)}else console.log(t)}))}select_object(t){let e=$.parseHTML(t.object),i=e[0].nodeName;console.log(e);let o=i,s=e[0].innerText,l=s?s.replace(/ /g,""):"",a="",h=["id","class","href","src","alt","aria-hidden","role","focusable","width","height","aria-label","rel","target"];l&&s&&"A"==i&&(o+=":contains('"+s+"')"),$(e[0].attributes).each((function(){-1!==$.inArray(this.nodeName,h)&&""!=this.nodeValue&&(a+="["+this.nodeName+'="'+this.nodeValue+'"]')})),o+=a,console.log("Element selector: "+o);let n=$(o);n.length?(n.wrap('<div class="edac-highlight edac-highlight-'+t.ruletype+'"></div>'),n.before('<div class="edac-highlight-tooltip-wrap"><button class="edac-highlight-btn edac-highlight-btn-'+t.ruletype+'" aria-label="'+t.rule_title+'" aria-expanded="false" aria-controls="edac-highlight-tooltip-'+t.id+'"></button><div class="edac-highlight-tooltip" id="edac-highlight-tooltip-'+t.id+'"><strong class="edac-highlight-tooltip-title">'+t.rule_title+'</strong><a href="'+t.link+'" class="edac-highlight-tooltip-reference" target="_blank" aria-label="Read documentation for '+t.rule_title+', opens new window"><span class="dashicons dashicons-info"></span></a><br /><span>'+t.summary+"</span></div></div>"),this.tooltip=$(".edac-highlight-tooltip"),this.tooltip.hide(),this.scroll_to(n),$(".edac-highlight-btn").mouseover((function(){this.tooltip_position($(this)),clearTimeout(this.timeout),$(this).next(this.tooltip).fadeIn(400)})).mouseout(this.tooltip_hide),$(this.tooltip).mouseover((function(){clearTimeout(this.timeout)})).mouseout(this.tooltip_hide),$(".edac-highlight-btn").click((function(){this.tooltip_position($(this)),"false"==$(this).attr("aria-expanded")?($(this).next(this.tooltip).fadeIn(400),$(this).attr("aria-expanded","true")):($(this).next(this.tooltip).fadeOut(400),$(this).attr("aria-expanded","false"))})),$(".edac-highlight-btn",n.parent()).first().focus(),$(".edac-highlight-btn",n.parent()).is(":visible")?console.log("Element visible: true"):(console.log("Element visible: false"),confirm("The element may be hidden on the page. Would you like to disable styles?")&&this.disabled_styles())):alert("Accessibility Checker could not find the element on the page.")}disabled_styles(){var t=$("head").find('style[type="text/css"]').add("style").add('link[rel="stylesheet"]');$("* [style]").not(this.tooltip).removeAttr("style"),$(t).each((function(){console.log(this.id),"edac-css"!=this.id&&"dashicons-css"!=this.id||t.splice($.inArray(this,t),1)})),$("head").data("css",t),t.remove()}enable_styles(){var t=$("head").data("css");t&&$("head").append(t)}scroll_to(t){let e,i=t.offset().top,o=t.height(),s=$(window).height();e=o<s?i-(s/2-o/2):i,$([document.documentElement,document.body]).animate({scrollTop:e},500)}tooltip_position(t){let e=$(window).width(),i=t.position(),o=i.top+7,s=i.left+t.width()+10;i.left>e/2?(s=i.left-t.next(this.tooltip).outerWidth()-15,t.next(this.tooltip).addClass("edac-highlight-tooltip-left")):(s=i.left+t.outerWidth()+15,t.next(this.tooltip).removeClass("edac-highlight-tooltip-left")),t.next(this.tooltip).css({left:s+"px",top:o+"px"}),t.next(this.tooltip).fadeIn()}tooltip_hide(){this.timeout=setTimeout((function(){$(this.tooltip).fadeOut(400)}),400)}}}(jQuery);